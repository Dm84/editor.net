<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:System="clr-namespace:System;assembly=mscorlib" x:Class="editor_wpf.MainWindow"
        xmlns:vm="clr-namespace:editor_wpf.ViewModel"
        Title="MainWindow" Height="350" Width="525" Closed="Window_Closed">
	<Window.Resources>
		<BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
	</Window.Resources>
	<Window.DataContext>
		<Binding Mode="OneWay" Path="Main" Source="{StaticResource Locator}"/>
	</Window.DataContext>
	<Grid>

		<StackPanel>
			<Menu Height="23" Width="517">
				<MenuItem Header="Entities">
					<MenuItem Click="MenuItem_Click" Name="EntitiesAddItem" Header="Add.." HorizontalAlignment="Left" Width="145" RenderTransformOrigin="0.5,1"/>
				</MenuItem>
			</Menu>
			<Grid RenderTransformOrigin="0.621,0.488" Height="297">
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"></RowDefinition>
				</Grid.RowDefinitions>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="317*"/>
					<ColumnDefinition Width="200*"></ColumnDefinition>
				</Grid.ColumnDefinitions>

				<WrapPanel Margin="1,0,0,-296"/>

				<TreeView Margin="0,0,4,-296" RenderTransformOrigin="0.5,0.5" Grid.Column="1" ItemsSource="{Binding entities}">
					<TreeView.ItemTemplate>
						<HierarchicalDataTemplate ItemsSource="{Binding instances}">
							<TextBlock Text="{Binding name}"></TextBlock>
							<HierarchicalDataTemplate.ItemTemplate>
								<DataTemplate>
									<TextBlock Text="{Binding name}"></TextBlock>
								</DataTemplate>
							</HierarchicalDataTemplate.ItemTemplate>
						</HierarchicalDataTemplate>
					</TreeView.ItemTemplate>
				</TreeView>
			</Grid>

		</StackPanel>
		<Grid Visibility="{Binding isWaiting, Converter={StaticResource BooleanToVisibilityConverter}, Mode=OneWay}">
			<Rectangle Fill="White" Opacity="0.7" />
			<TextBlock HorizontalAlignment="Center" VerticalAlignment="Center">Загрузка...</TextBlock>
		</Grid>
	</Grid>
</Window>
